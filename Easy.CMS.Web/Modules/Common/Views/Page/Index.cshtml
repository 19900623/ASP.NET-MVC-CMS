@using Easy.CMS.Page
@using Easy.HTML.jsTree
@{

}
<div class="panel panel-default">
    <div class="panel-heading">
        <div>
            页面
            <a href="@Url.Action("Create", new { module = "Common" })">
                <i class="glyphicon glyphicon-plus"></i>
                添加页面
            </a>
        </div>
    </div>
    <div class="panel-body">

        @(
 Html.Tree<PageEntity>().Source("GetPageTree", "Page", new { module = "Common" }).AddPlugin(Plugins.ContextMenu)
 .AddContextMenuItem(new ContextmenuItem { Label = "新建", Action = "Create" })
         .AddContextMenuItem(new ContextmenuItem { Label = "编辑", Action = "Edit" })
         .AddContextMenuItem(new ContextmenuItem { Label = "查看", Action = "View" })
         .AddContextMenuItem(new ContextmenuItem { Label = "设计", Action = "Design" })
        )

    </div>
</div>
<script type="text/javascript">
    function Create(node) {
        var parent = node.reference.attr("id");
        window.location.href = '@Url.Action("Create", "Page", new { module = "Common" })' + '?ParentID=' + parent;
    }
    function Edit(node) {
        var id = node.reference.attr("id");
        window.location.href = '@Url.Action("Edit", "Page", new { module = "Common" })' + '?ID=' + id;
    }
    function View(node) {
        var id = node.reference.attr("id");
        window.open('@Url.Action("RedirectView", "Page", new {module="Common" })' + '?ID=' + id);
    }
    function Design(node) {
        var id = node.reference.attr("id");
        window.location.href = '@Url.Action("Design", "Page", new {module="Common" })' + '?ID=' + id;
    }
</script>
